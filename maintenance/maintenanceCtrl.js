
(function(){"use strict";var a,b={"Line A":[0,0,0,0,0],"Line B":[0,0,0,0,0]};angular.module("myApp").controller("maintenanceCtrl",["$scope","$http","$route","$routeParams","$timeout","$interval",function(c,d,e,f,g,h){function i(){b[f.machineId][0]+=1,j("routine1",b[f.machineId][0],f.machineId.slice(5,6)),b[f.machineId][1]+=1,j("routine2",b[f.machineId][1]/6,f.machineId.slice(5,6)),b[f.machineId][2]+=1,j("routine3",b[f.machineId][2]/50,f.machineId.slice(5,6)),b[f.machineId][3]+=1,j("routine4",b[f.machineId][3]/.5,f.machineId.slice(5,6)),b[f.machineId][4]+=1,j("routine5",b[f.machineId][4]/20,f.machineId.slice(5,6))}function j(a,b,c,d){b=Math.round(100*b)/100;var e=d3.select("#"+c+"-"+a);d?(e.attr("class",""),e.attr("class","progress-bar progress-bar-striped progress-bar-animated").style("width",b+"%").html(b+"%")):(e.attr("aria-valuenow",b).style("width",b+"%").html(b+"%"),90<b&&"progress-bar progress-bar-striped progress-bar-animated"==e.attr("class")&&(e.attr("class","progress-bar progress-bar-striped progress-bar-animated bg-danger"),"routine4"==a?l():k()))}function k(){emailjs.send("gmail","maintenance",{name:"Diego",maintenancePeriod:"monthly",machine:"Blow Molding Machine XXXXXXX"}).then(function(a){console.log("SUCCESS!",a.status,a.text)},function(a){console.log("FAILED...",a)})}function l(){emailjs.send("gmail","template_daZpaGGP",{name:"Diego",maintenancePeriod:"annual",machine:"Grinder XXXXX"}).then(function(a){console.log("SUCCESS!",a.status,a.text)},function(a){console.log("FAILED...",a)})}c.line=f.machineId.slice(5,6),a=h(function(){"maintenance/maintenance.html"==e.current.templateUrl?i():h.cancel(a)},500),c.resetValue=function(a,c){b[f.machineId][a]=0,j(c,b[f.machineId][a],f.machineId.slice(5,6),!0)}}])})();
