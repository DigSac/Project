
(function(){"use strict";angular.module("myApp").controller("dashboardCtrl",["$scope","$http","$route","$interval","$routeParams",function(a){function b(a){var b,{innerRadius:c,outerRadius:d,legendSize:e,margin:f,minValue:g,maxValue:h,value:i,units:j,id:k,colorPerPercent:l}=a;return b=new GaugeChart({innerRadius:c,outerRadius:d,legendSize:e,minValue:g,maxValue:h,value:i,units:j,id:k,margin:f,colorPerPercent:l}),b.CreateGaugeChart(),b.UpdateGaugeChart(i),b}function c(){var a=j.minValue+Math.random()*(j.maxValue-j.minValue);p.UpdateGaugeChart(a);var b=k.minValue+Math.random()*(k.maxValue-k.minValue);q.UpdateGaugeChart(b);var c=l.minValue+Math.random()*(l.maxValue-l.minValue);r.UpdateGaugeChart(c);var d=m.minValue+Math.random()*(m.maxValue-m.minValue);s.UpdateGaugeChart(d);var e=n.minValue+Math.random()*(n.maxValue-n.minValue);t.UpdateGaugeChart(e);var f=o.minValue+Math.random()*(o.maxValue-o.minValue);u.UpdateGaugeChart(f)}function d(){v.dataset.forEach(function(a){a.GoodBottles=Math.round(500+1e3*Math.random()),a.RejectedBottles=Math.round(500*Math.random())}),w.UpdateStackedBarChart(v.dataset)}function e(){y.dataset.forEach(function(a){a.count=Math.round(1e3*Math.random())/10}),y.UpdatePieChart(x.dataset)}function f(){A.dataset.forEach(function(a){a.RunningTime=Math.round(1e3*Math.random()),a.Failures=Math.round(100*Math.random())}),A.UpdateDualAxisBarChart(z.dataset)}function g(){a.material.virgin[0]=Math.round(1e3*(a.material.virgin[0]+.0728))/1e3,a.material.virgin[1]=70,a.material.regrind[0]=Math.round(1e3*(a.material.regrind[0]+.02912))/1e3,a.material.regrind[1]=28,a.material.masterbatch[0]=Math.round(1e3*(a.material.masterbatch[0]+.00208))/1e3,a.material.masterbatch[1]=2,a.material.total=Math.round(1e3*(a.material.total+.104))/1e3,a.material.consumption=Math.round(100*(75+Math.random()))/100}function h(){a.energy.R[0]=Math.round(10*(439+Math.random()))/10,a.energy.R[1]=Math.round(10*(78.5+Math.random()))/10,a.energy.S[0]=Math.round(10*(441+Math.random()))/10,a.energy.S[1]=Math.round(10*(77.5+Math.random()))/10,a.energy.T[0]=Math.round(10*(437+Math.random()))/10;a.energy.T[1]=Math.round(10*(75.7+Math.random()))/10,a.energy.power=Math.round(100*(48+Math.random()))/100}function i(){a.cycleTime=Math.round(10*(8+Math.random()))/10,a.productionCounter+=3,a.quality=Math.round(10*(95+4*Math.random()))/10,a.kwKg=Math.round(100*(2+Math.random()))/100,a.kwBottle=Math.round(1e3*(.2*Math.random()))/1e3}var j={innerRadius:70,outerRadius:100,legendSize:35,margin:{Left:2,Right:2,Top:20,Bottom:20},minValue:0,maxValue:100,value:0,units:"\xB0F",id:"waterTemp",colorPerPercent:[{color:"green",start:0,end:20},{color:"gold",start:40,end:60},{color:"red",start:80,end:100}]},k={innerRadius:70,outerRadius:100,legendSize:35,margin:{Left:2,Right:2,Top:20,Bottom:20},minValue:0,maxValue:300,value:0,units:"psi",id:"waterPressure",colorPerPercent:[{color:"green",start:0,end:100},{color:"gold",start:150,end:200},{color:"red",start:250,end:300}]},l={innerRadius:70,outerRadius:100,legendSize:35,margin:{Left:2,Right:2,Top:20,Bottom:20},minValue:0,maxValue:100,value:0,units:"%",id:"relHumidity",colorPerPercent:[{color:"green",start:0,end:20},{color:"gold",start:40,end:60},{color:"red",start:80,end:100}]},m={innerRadius:70,outerRadius:100,legendSize:35,margin:{Left:2,Right:2,Top:20,Bottom:20},minValue:0,maxValue:100,value:0,units:"\xB0F",id:"airTemp",colorPerPercent:[{color:"green",start:0,end:20},{color:"gold",start:40,end:60},{color:"red",start:80,end:100}]},n={innerRadius:70,outerRadius:100,legendSize:35,margin:{Left:2,Right:2,Top:20,Bottom:20},minValue:0,maxValue:150,value:0,units:"psi",id:"airPressure",colorPerPercent:[{color:"green",start:0,end:200},{color:"gold",start:400,end:600},{color:"red",start:800,end:1e3}]},o={innerRadius:70,outerRadius:100,legendSize:35,margin:{Left:2,Right:2,Top:20,Bottom:20},minValue:0,maxValue:100,value:0,units:"\xB0F",id:"oilTemp",colorPerPercent:[{color:"green",start:0,end:20},{color:"gold",start:40,end:60},{color:"red",start:80,end:100}]},p=b(j),q=b(k),r=b(l),s=b(m),t=b(n),u=b(o),v={width:300,height:150,paddingInner:.4,yScaleWidth:135,xScaleHeight:40,xTicks:6,xAxisLegend:"bottles",legendWidth:130,legendChartSpace:20,units:"bottles",id:"qualityControl",dataset:[{Equipment:"Leak Tester",GoodBottles:0,RejectedBottles:0},{Equipment:"Weight Checker",GoodBottles:0,RejectedBottles:0},{Equipment:"Vision Inspection System",GoodBottles:0,RejectedBottles:0}],colorData:["dodgerblue","orangered"],barsOpacity:.8,margin:{Left:2,Right:2,Top:30,Bottom:15},legendRectSize:15,legendSpacing:15},w=function(a){var b,{width:c,height:d,paddingInner:e,yScaleWidth:f,xScaleHeight:g,xAxisLegend:h,xTicks:i,legendWidth:j,legendChartSpace:k,units:l,id:m,dataset:n,colorData:o,barsOpacity:p,margin:q,legendRectSize:r,legendSpacing:s}=a;return b=new StackedBarChart({width:c,height:d,paddingInner:e,yScaleWidth:f,xScaleHeight:g,xTicks:i,xAxisLegend:h,legendWidth:j,legendChartSpace:k,dataset:n,colorData:o,units:l,id:m,barsOpacity:p,margin:q,legendRectSize:r,legendSpacing:s}),b.CreateStackedBarChart(),b.UpdateStackedBarChart(n),b}(v),x={innerRadius:0,outerRadius:100,units:"h",id:"machineTime",dataset:[{id:0,label:"Mold Change",count:0},{id:1,label:"Maintenance",count:0},{id:2,label:"Production",count:0},{id:3,label:"Off",count:0},{id:4,label:"Iddle",count:0}],margin:{Left:50,Right:2,Top:20,Bottom:20},legendRectSize:15,legendSpacing:5},y=function(a){var b,{innerRadius:c,outerRadius:d,units:e,id:f,dataset:g,margin:h,legendRectSize:i,legendSpacing:j}=a;return b=new PieChart({innerRadius:c,outerRadius:d,dataset:g,units:e,id:f,margin:h,legendRectSize:i,legendSpacing:j}),b.CreatePieChart(),b.UpdatePieChart(g),b}(x),z={width:350,height:150,paddingInner:.4,yScaleWidth:100,xScaleHeight:50,yTicks:6,yLeftAxisLegend:"Running Time",yRightAxisLegend:"Number of Failures",units:["h",""],id:"timeFailure",dataset:[{Equipment:"Compressor",RunningTime:0,Failures:0},{Equipment:"Chiller",RunningTime:0,Failures:0},{Equipment:"Loader",RunningTime:0,Failures:0},{Equipment:"Grinder",RunningTime:0,Failures:0},{Equipment:"Blender",RunningTime:0,Failures:0}],colorData:["limegreen","crimson"],barsOpacity:.8,margin:{Left:2,Right:2,Top:15,Bottom:15},legendMargin:40,legendRectSize:15,legendSpacing:15},A=function(a){var b,{width:c,height:d,paddingInner:e,yScaleWidth:f,xScaleHeight:g,yTicks:h,yLeftAxisLegend:i,yRightAxisLegend:j,units:k,id:l,dataset:m,colorData:n,barsOpacity:o,margin:p,legendMargin:q,legendRectSize:r,legendSpacing:s}=a;return b=new DualAxisBarChart({width:c,height:d,paddingInner:e,yScaleWidth:f,xScaleHeight:g,yTicks:h,yLeftAxisLegend:i,yRightAxisLegend:j,dataset:m,colorData:n,barsOpacity:o,units:k,id:l,margin:p,legendMargin:q,legendRectSize:r,legendSpacing:s}),b.CreateDualAxisBarChart(),b.UpdateDualAxisBarChart(m),b}(z),B=setInterval(function(){c(),d(),e(),f(),g(),h(),i(),a.$apply()},5e3);a.material={virgin:[0,0],regrind:[0,0],masterbatch:[0,0],total:0,consumption:0},a.energy={R:[0,0],S:[0,0],T:[0,0],power:0},a.cycleTime=0,a.productionCounter=0,a.quality=0,a.kwKg=0,a.kwBottle=0}])})();
